let laptopsList = [{
    id: 1,
    name: `Laptop HP 15,6 Pulgadas 15 dw1066la - Plata Natural`,
    year: 2021,
    price: 1500,
    specs: "<br> - Intel Core i5. <br> - Ram 8GB. <br> - SSD 500GB. <br> - Intel HD grapichs.",
    img: "./img/imagesLaptops/1/img_one.jpg",
    imgC: { img1: "./img/imagesLaptops/1/img_one.jpg", img2: "./img/imagesLaptops/1/img_two.jpg", img3: "./img/imagesLaptops/1/img_three.jpg", img4: "./img/imagesLaptops/1/img_one.jpg" },
    information: `Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quibusdam numquam aut fuga 
    vitae repudiandae. Commodi optio laudantium voluptatibus porro consequatur aspernatur molestias libero 
    eius voluptas magni. Aliquid ab maiores sunt?`,
}, {
    id: 2,
    name: `Laptop ASUS 14 Pulgadas X415JA-BV1097TS - Azul`,
    year: 2021,
    price: 2500,
    specs: "<br> - Procesador Intel Pentium Gold. <br> - Ram 4GB. <br> - SSD 125GB. <br> - Intel HD grapichs.",
    img: "./img/imagesLaptops/2/img_1.jpg",
    imgC: { img1: "./img/imagesLaptops/2/img_1.jpg", img2: "./img/imagesLaptops/2/img_2.jpg", img3: "./img/imagesLaptops/2/img_3.jpg", img4: "./img/imagesLaptops/2/img_1.jpg" },
    information: `Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quibusdam numquam aut fuga 
    vitae repudiandae. Commodi optio laudantium voluptatibus porro consequatur aspernatur molestias libero 
    eius voluptas magni. Aliquid ab maiores sunt?`,
}, {
    id: 3,
    name: `Laptop LENOVO 14 Pulgadas S145 - Negro`,
    year: 2021,
    price: 3000,
    specs: `<br> - Intel Core i3. <br> - Ram 4GB. <br> - Disco Solido 128GB.`,
    img: "./img/imagesLaptops/3/img_1.jpg",
    imgC: { img1: "./img/imagesLaptops/3/img_1.jpg", img2: "./img/imagesLaptops/3/img_2.png", img3: "./img/imagesLaptops/3/img_3.png", img4: "./img/imagesLaptops/3/img_4.png" },
    information: `Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quibusdam numquam aut fuga 
    vitae repudiandae. Commodi optio laudantium voluptatibus porro consequatur aspernatur molestias libero 
    eius voluptas magni. Aliquid ab maiores sunt?`,
}, {
    id: 4,
    name: `Laptop ACER 15.6 Pulgadas 31VS - Plateado`,
    year: 2020,
    price: 1600,
    specs: `<br> - Intel Core i3. <br> - 4GB RAM. <br> - Disco Solido 256GB.`,
    img: "./img/imagesLaptops/4/img_1.jpg",
    imgC: { img1: "./img/imagesLaptops/4/img_1.jpg", img2: "./img/imagesLaptops/4/img_2.jpg", img3: "./img/imagesLaptops/4/img_3.jpg", img4: "./img/imagesLaptops/4/img_4.jpg" },
    information: `Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quibusdam numquam aut fuga 
    vitae repudiandae. Commodi optio laudantium voluptatibus porro consequatur aspernatur molestias libero 
    eius voluptas magni. Aliquid ab maiores sunt?`,
}, {
    id: 5,
    name: `MacBook Air de 13 Pulgadas MGN63LA/A - Gris espacial`,
    year: 2021,
    price: 4000,
    specs: `<br> - Chip M1. <br> - RAM 8GB. <br> - Disco Estado Solido 256 GB.`,
    img: "./img/imagesLaptops/5/img_1.jpg",
    imgC: { img1: "./img/imagesLaptops/5/img_1.jpg", img2: "./img/imagesLaptops/5/img_2.jpg", img3: "./img/imagesLaptops/5/img_3.jpg", img4: "./img/imagesLaptops/5/img_4.jpg" },
    information: `Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quibusdam numquam aut fuga 
    vitae repudiandae. Commodi optio laudantium voluptatibus porro consequatur aspernatur molestias libero 
    eius voluptas magni. Aliquid ab maiores sunt?`,
}, {
    id: 6,
    name: `laptop Huawei 15.6 pulgadas Matebook D15`,
    year: 2021,
    price: 1800,
    specs: `<br> - Intel Core i5. <br> - SSD 512GB. <br> - 16GB RAM.`,
    img: "./img/imagesLaptops/6/img_1.jpg",
    imgC: { img1: "./img/imagesLaptops/6/img_1.jpg", img2: "./img/imagesLaptops/6/img_2.jpg", img3: "./img/imagesLaptops/6/img_3.jpg", img4: "./img/imagesLaptops/6/img_4.jpg" },
    information: `Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quibusdam numquam aut fuga 
    vitae repudiandae. Commodi optio laudantium voluptatibus porro consequatur aspernatur molestias libero 
    eius voluptas magni. Aliquid ab maiores sunt?`,
}, {
    id: 7,
    name: `Laptop MSI 15.6 Pulgadas Modern 15A5M - Gris`,
    year: 2021,
    price: 3000,
    specs: `<br> - Ryzen 5. <br> - 8GB RAM. <br> - Disco Estado Sólido 256GB.`,
    img: "./img/imagesLaptops/7/img_1.jpg",
    imgC: { img1: "./img/imagesLaptops/7/img_1.jpg", img2: "./img/imagesLaptops/7/img_2.jpg", img3: "./img/imagesLaptops/7/img_3.jpg", img4: "./img/imagesLaptops/7/img_4.jpg" },
    information: `Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quibusdam numquam aut fuga 
    vitae repudiandae. Commodi optio laudantium voluptatibus porro consequatur aspernatur molestias libero 
    eius voluptas magni. Aliquid ab maiores sunt?`,
}, {
    id: 8,
    name: `Laptop LENOVO 10,1 Pulgadas D330 - Gris`,
    year: 2019,
    price: 1500,
    specs: `<br> - Intel Celeron. <br> - 4GB Ram. <br> - Disco Solido 64GB. <br> - Computador Convertible 2en1.`,
    img: "./img/imagesLaptops/8/img_1.jpg",
    imgC: { img1: "./img/imagesLaptops/8/img_1.jpg", img2: "./img/imagesLaptops/8/img_2.jpg", img3: "./img/imagesLaptops/8/img_3.jpg", img4: "./img/imagesLaptops/8/img_4.jpg" },
    information: `Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quibusdam numquam aut fuga 
    vitae repudiandae. Commodi optio laudantium voluptatibus porro consequatur aspernatur molestias libero 
    eius voluptas magni. Aliquid ab maiores sunt?`,
}]

let smartphoneList = [{
    id: 9,
    name: `Celular MOTOROLA G20 64GB Rosado`,
    year: 2021,
    price: 600,
    specs: `<br> - Sistema de 4 cámaras con 48 MP1. <br> - Pantalla fluida de 90 Hz con 6.5. <br> - Hasta 2 días de batería.`,
    img: "./img/imagesSmartphones/1/img_1.jpg",
    imgC: { img1: "./img/imagesSmartphones/1/img_1.jpg", img2: "./img/imagesSmartphones/1/img_2.jpg", img3: "./img/imagesSmartphones/1/img_3.jpg", img4: "./img/imagesSmartphones/1/img_4.jpg" },
    information: `El nuevo moto g20 cuenta con un avanzado sistema de 4 cámaras. Anhelas un sensor de 48 MP1 y 
    cámaras que se adapten a cada situación. Es tuyo. Qué tal una pantalla ultra amplia más fluida. Con el 
    moto g20, es posible.`,
}, {
    id: 10,
    name: `Celular XIAOMI REDMI 10 128GB Gris`,
    year: 2021,
    price: 500,
    specs: `<br> - Cámara cuádruple de 50Mp. <br> - Alta calidad al mejor precio. <br> - Pantalla de 90Hz. <br> - Disfruta mejores experiencias en juegos. <br> - Procesador MediaTek G88, poderoso en todo momento.`,
    img: "./img/imagesSmartphones/2/img_1.jpg",
    imgC: { img1: "./img/imagesSmartphones/2/img_1.jpg", img2: "./img/imagesSmartphones/2/img_2.jpg", img3: "./img/imagesSmartphones/2/img_3.jpg", img4: "./img/imagesSmartphones/2/img_4.jpg" },
    information: `Con el nuevo Redmi 10 tendrás la total seguridad que todos tus momentos serán especiales 
    gracias a su alta resolución de 50MP en su cámara principal que harán que todos tus recuerdos tengan 
    colores vivos y reales, complementados con 3 cámaras para que no te piedras de ningún detalle, Si lo que 
    te gusta es ver películas, series o videos, tendrás la gran ventaja de contar con una gran pantalla de 6.5 
    pulgadas que se complementan con una tasa de refresco de 90Hz haciéndolo uno de los smartphones más económicos 
    con esta característica.`,
}, {
    id: 11,
    name: `Celular SAMSUNG Galaxy A12 64GB Negro`,
    year: 2021,
    price: 700,
    specs: `<br> - Batería inteligente 5000 mAh que te dura todo el día. <br> - Pantalla HD+ que permite ver tus videos con gran nitidez. <br> - Almacenamiento de 128GB para que guardes tus archivos.`,
    img: "./img/imagesSmartphones/3/img_1.jpg",
    imgC: { img1: "./img/imagesSmartphones/3/img_1.jpg", img2: "./img/imagesSmartphones/3/img_2.jpg", img3: "./img/imagesSmartphones/3/img_3.jpg", img4: "./img/imagesSmartphones/3/img_4.jpg" },
    information: `El elegante Galaxy A12 presenta una hermosa pantalla HD + de 6.5 pulgadas que crea una 
    experiencia visual sin interrupciones, gracias a su gama de colores vibrantes que cuentan con un exclusivo 
    efecto 3D de brillo. Además, viene con una potente cámara cuádruple que facilita la captura de imágenes y 
    videos de aspecto profesional.`,
}, {
    id: 12,
    name: `Celular OPPO A54 128GB Azul`,
    year: 2021,
    price: 400,
    specs: `<br> - Diseño de cuerpo curvo 3D para un agarre cómodo y seguro. <br> -  Resistencia a salpicaduras de agua IPX4. <br> - 2 años de Garantía.`,
    img: "./img/imagesSmartphones/4/img_1.jpg",
    imgC: { img1: "./img/imagesSmartphones/4/img_1.jpg", img2: "./img/imagesSmartphones/4/img_2.jpg", img3: "./img/imagesSmartphones/4/img_3.jpg", img4: "./img/imagesSmartphones/4/img_4.jpg" },
    information: `El OPPO A54 viene para ofrecerte una experiencia de nivel superior con una gran batería de 
    5000 mAh que te brindará hasta 2 días de uso y además cuenta con carga rápida. También ofrece una novedosa 
    pantalla punch-hole de alta resolución para juegos, películas y contenido multimedia de alta fluidez.`,
}, {
    id: 13,
    name: `iPhone 13 128GB Blanco Estrella`,
    year: 2021,
    price: 2000,
    specs: `<br> - A15, Un chip superrápido que deja atrás a la competencia. <br> -  Un gran salto en duración de batería. Hasta 2,5 horas más. <br> - Modo Cine: Te permite editar profundidad luego de la toma.`,
    img: "./img/imagesSmartphones/5/img_1.jpg",
    imgC: { img1: "./img/imagesSmartphones/5/img_1.jpg", img2: "./img/imagesSmartphones/5/img_2.jpg", img3: "./img/imagesSmartphones/5/img_3.jpg", img4: "./img/imagesSmartphones/5/img_4.jpg" },
    information: `Diseñamos una arquitectura completamente nueva y giramos los lentes 45 grados. De esta manera, 
    pudimos incluir nuestro sistema de dos cámaras más avanzado y un sensor de cámara gran angular más grande.`,
}, {
    id: 14,
    name: `Celular KALLEY Silver Max Lite 32 GB Verde`,
    year: 2021,
    price: 200,
    specs: `<br> - 6,5" HD+ IPS Gran tamaño de Pantalla y Resolución. <br> - Batería de 5.000mAh Eficienciente y de larga duración. <br> - CPU de 8 núcleos con GPU GE8322 Gran rendimiento y fluidez.`,
    img: "./img/imagesSmartphones/6/img_1.jpg",
    imgC: { img1: "./img/imagesSmartphones/6/img_1.jpg", img2: "./img/imagesSmartphones/6/img_2.jpg", img3: "./img/imagesSmartphones/6/img_3.jpg", img4: "./img/imagesSmartphones/6/img_4.jpg" },
    information: `Fantástica Pantalla waterdrop de 6.5”HD+ Batería de 5.000mAh que dura todo el día, Captura 
    los mejores momentos con tu Cámara principal de 8MP con amplio campo de visión, Con modo Fokus (Retrato) 
    Sistema operativo Android 11 Go Edition, una versión más eficiente y ultraligera.`,
}, {
    id: 15,
    name: `Celular ZTE BLADE A5 2020 - 64GB Azul`,
    year: 2021,
    price: 150,
    specs: `<br> - Doble cámara, podrás mejorar la calidad en tus fotos. <br> - Experiencia inmersa con la pantalla completa de 6.088” HD+. <br> - Dual SIM, tu número personal y laboral en el mismo teléfono`,
    img: "./img/imagesSmartphones/7/img_1.jpg",
    imgC: { img1: "./img/imagesSmartphones/7/img_1.jpg", img2: "./img/imagesSmartphones/7/img_2.jpg", img3: "./img/imagesSmartphones/7/img_3.jpg", img4: "./img/imagesSmartphones/7/img_4.jpg" },
    information: `Experimenta lo mejor del entretenimiento en un solo equipo, conoce el ZTE BLADE A5 2020.| 
    Celular alimentado por el chipset Spreadtrum SC9863A, 2 GB de RAM y 64 GB de almacenamiento interno y 
    cámara dual posterior para registrar todos tus recuerdos con un gran nivel de detalle.`,
}, {
    id: 16,
    name: `Celular NOKIA 5.4 - 128GB Azul`,
    year: 2021,
    price: 400,
    specs: `<br> - Android One, siempre seguro y actualizado, Lo que quieras, cuando quieras. <br> - Batería de hasta 2 días de duracion. <br> - Pon tu mirada en su gran pantalla 6,39"HD+`,
    img: "./img/imagesSmartphones/8/img_1.jpg",
    imgC: { img1: "./img/imagesSmartphones/8/img_1.jpg", img2: "./img/imagesSmartphones/8/img_2.jpg", img3: "./img/imagesSmartphones/8/img_3.jpg", img4: "./img/imagesSmartphones/8/img_4.jpg" },
    information: `Causa la mejor impresión con tu Nokia 5.4, con una cámara cuádruple de 48MPX, grabación de 
    video avanzado con efectos cinematográficos, podrás capturar tu mundo con un asombroso detalle. Siempre 
    tendrás más de lo que esperas con un rendimiento en el que puedes confiar, gracias a su batería de larga 
    duración y su gran procesador Qualcomm Snapdragon optimizado.`,
}]

/* let accessoriesList = [{
    id: 1,
    name: `d`,
    year: 2021,
    price: 2500,
    specs: `d`,
    information: `Lorem ipsum, dolor sit amet consectetur adipisicing elit. Quibusdam numquam aut fuga 
    vitae repudiandae. Commodi optio laudantium voluptatibus porro consequatur aspernatur molestias libero 
    eius voluptas magni. Aliquid ab maiores sunt?`,
}] */

function colocar_decimal(num) {
    return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.')
}

let sectionOne = document.querySelector("#pageSectionLaptops")
let sectionTwo = document.querySelector("#pSectionSmartphones")
//let sectionThree = document.querySelector("#pSectionAcc")

for (const iterador of laptopsList) {
    sectionOne.innerHTML += `
    <div class="col">
        <div class="card h-100">
            <img src="${iterador.img}" class="card-img-top w-100 img-producto">
            <div class="card-body">
                <h4 class="card-title text-center">${iterador.name}</h4>
                <h5 class="text-center">Price: $${colocar_decimal(iterador.price)}</h5>
                <p class="card-text">Year Product: ${iterador.year}</p>
                <p class="card-text">Specs: ${iterador.specs}</p>
                <div class="d-flex justify-content-evenly align-items-center" >
                    <button type="button" class="btn btn-dark text-center" data-bs-toggle="modal" data-bs-target="#exampleModal${iterador.id}">More info!</button>
                    <button type="button" class="btn btn-primary text-center" onclick="agregarProductoCarrito('${iterador.name}', ${iterador.price}, ${iterador.id})">Add to cart!</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="exampleModal${iterador.id}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-center" id="exampleModalLabel">${iterador.name}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="${iterador.imgC.img1}" class="d-block w-100">
                            </div>
                            <div class="carousel-item">
                                <img src="${iterador.imgC.img2}" class="d-block w-100">
                            </div>
                            <div class="carousel-item">
                                <img src="${iterador.imgC.img3}" class="d-block w-100">
                            </div>
                            <div class="carousel-item">
                                <img src="${iterador.imgC.img4}" class="d-block w-100">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                    <div>
                        <p>${iterador.information}</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close window</button>
                </div>
            </div>
        </div>
    </div>
`
}

for (const iteradorDos of smartphoneList) {
    sectionTwo.innerHTML += `
    <div class="col">
        <div class="card h-100">
            <img src="${iteradorDos.img}" class="card-img-top w-100 img-producto">
            <div class="card-body">
                <h4 class="card-title text-center">${iteradorDos.name}</h4>
                <h5 class="text-center">Price: $${colocar_decimal(iteradorDos.price)}</h5>
                <p class="card-text">Year Product: ${iteradorDos.year}</p>
                <p class="card-text">Specs: ${iteradorDos.specs}</p>
                <div class="d-flex justify-content-evenly align-items-center" >
                    <button type="button" class="btn btn-dark text-center" data-bs-toggle="modal" data-bs-target="#exampleModal${iteradorDos.id}">More info!</button>
                    <button type="button" class="btn btn-primary text-center" onclick="agregarProductoCarrito('${iteradorDos.name}', ${iteradorDos.price}, ${iteradorDos.id})">Add to cart!</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="exampleModal${iteradorDos.id}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-center" id="exampleModalLabel">${iteradorDos.name}</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div id="carouselExampleFade" class="carousel slide carousel-fade" data-bs-ride="carousel">
                        <div class="carousel-inner">
                            <div class="carousel-item active">
                                <img src="${iteradorDos.imgC.img1}" class="d-block w-100">
                            </div>
                            <div class="carousel-item">
                                <img src="${iteradorDos.imgC.img2}" class="d-block w-100">
                            </div>
                            <div class="carousel-item">
                                <img src="${iteradorDos.imgC.img3}" class="d-block w-100">
                            </div>
                            <div class="carousel-item">
                                <img src="${iteradorDos.imgC.img4}" class="d-block w-100">
                            </div>
                        </div>
                        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="prev">
                            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Previous</span>
                        </button>
                        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleFade" data-bs-slide="next">
                            <span class="carousel-control-next-icon" aria-hidden="true"></span>
                            <span class="visually-hidden">Next</span>
                        </button>
                    </div>
                    <div>
                        <p>${iteradorDos.information}</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close window</button>
                </div>
            </div>
        </div>
    </div>
`
}

class CarritoDeCompras {
    constructor() {
        this.productos = [];
    }

    nuevo_producto(info_producto) {
        this.productos.push(info_producto);
        return this.productos;
    }

    precio_total() {
        let cuenta_total = 0;
        this.productos.forEach(function (producto) {
            cuenta_total = parseInt(cuenta_total) + parseInt(producto.precio)
        });
        return cuenta_total
    }
    eliminar_producto() {
        this.productos.pop();
    }
}

let userBuy = new CarritoDeCompras();
let table = document.querySelector("#tableProducts")
let counterCart = document.querySelector("#cartNumber")
let contCart = 0;
let tableSectionTotal = document.getElementById("footerTotal")

if (localStorage.getItem('counterCart') == null) {
    localStorage.setItem('counterCart', contCart)
    counterCart.innerHTML = `
        <span>${contCart}</span>
    `
} else {
    contCart = localStorage.getItem('counterCart')
    counterCart.innerHTML = `
        <span>${contCart}</span>
    `
}

var productCounter = 1;

if (localStorage.getItem("counter") == null) {
    localStorage.setItem('counter', productCounter)
} else {
    productCounter = localStorage.getItem("counter")
}

function enlistProduct(currentCounter = 1, listProduct = false) {
    //debugger
    if (listProduct) {
        let futureCounter = localStorage.getItem('counter')
        for (let x = 1; x < futureCounter; x++) {
            if (localStorage.getItem('Id_' + x) != null && localStorage.getItem('Name_' + x) != null &&
                localStorage.getItem('Price_' + x) != null && localStorage.getItem('totalPriceUni_' + x) != null) {
                //debugger
                table.innerHTML += `
                        <tr>
                            <td class='text-center'>${localStorage.getItem('Id_' + x)}</td>
                            <td>${localStorage.getItem('Name_' + x)}</td>
                            <td id="productCantNumber${x}" class="input">${localStorage.getItem('Cantproduct_' + x)}</td>
                            <td>$ ${localStorage.getItem('Price_' + x)}</td>
                            <td>$ ${localStorage.getItem('totalPriceUni_' + x)}</td>
                            <td>
                                <button class="btn btn-success fw-bold" type="button" onclick="editCantProduct(${x})">
                                    Edit Cant
                                </button>
                                <button class="btn btn-danger" type="button" onclick="deleteProduct(${x})">
                                    <i class="far fa-trash-alt"></i>
                                </button>
                            </td>
                        </tr>
                    `
            }
        }
        valorTotalCartShop()
        tableSectionTotal.innerHTML = `
        <tr>
            <td colspan="5" class="text-center fw-bold">Total price of product</td>
            <td colspan="6">$ ${localStorage.getItem('sumaTotalPreciosCart')}</td>
        </tr>
        `
    } else {
        table.innerHTML += `
            <tr>
                <td class='text-center'>${localStorage.getItem('Id_' + currentCounter)}</td>
                <td>${localStorage.getItem('Name_' + currentCounter)}</td>
                <td id="productCantNumber${currentCounter}" class="input">${localStorage.getItem('Cantproduct_' + currentCounter)}</td>
                <td>$ ${localStorage.getItem('Price_' + currentCounter)}</td>
                <td>$ ${localStorage.getItem('totalPriceUni_' + currentCounter)}</td>
                <td>
                    <button class="btn btn-success fw-bold" type="button" onclick="editCantProduct(${currentCounter})">
                        Edit Cant.
                    </button>
                    <button class="btn btn-danger" type="button" onclick="deleteProduct(${currentCounter})">
                        <i class="far fa-trash-alt"></i>
                    </button>
                </td>
            </tr>
        `
        tableSectionTotal.innerHTML = `
        <tr>
            <td colspan="5" class="text-center fw-bold">Total price of product</td>
            <td colspan="6">$ ${localStorage.getItem('sumaTotalPreciosCart')}</td>
        </tr>
        `
    }
}

valorTotalCartShop()
enlistProduct(1, true)

function agregarProductoCarrito(productName, productPrice, productId) {
    let productInfo = { nombre: productName, precio: productPrice, identificador: productId }

    var contCantidad = 1
    var totalPrice = parseInt(productInfo.precio)

    localStorage.setItem("Id_" + productCounter, parseInt(productInfo.identificador))
    localStorage.setItem("Name_" + productCounter, productInfo.nombre)
    localStorage.setItem("Price_" + productCounter, parseInt(productInfo.precio))
    localStorage.setItem("Cantproduct_" + productCounter, contCantidad)
    localStorage.setItem("totalPriceUni_" + productCounter, totalPrice)

    productCounter = parseInt(productCounter) + 1
    localStorage.setItem("counter", productCounter)

    userBuy.nuevo_producto(productInfo)
    // console.log(userBuy.nuevo_producto(productInfo))

    //debugger
    contCart = parseInt(contCart) + 1
    // console.log(contCart)
    localStorage.setItem('counterCart', contCart)
    counterCart.innerHTML = `
    <span>${localStorage.getItem('counterCart')}</span>
    `
    valorTotalCartShop()
    let currentCounter = parseInt(productCounter) - 1
    enlistProduct(currentCounter)
}

function editCantProduct(productUbi) {
    // console.log(productUbi)
    var inputCantChange = document.getElementById(`productCantNumber${productUbi}`);
    // console.log(inputCantChange)
    var productCantAfter = localStorage.getItem('Cantproduct_' + productUbi)
    // console.log(productCantAfter)
    var productPriceAfter = localStorage.getItem('totalPriceUni_' + productUbi)
    // console.log(productPriceAfter)
    inputCantChange.innerHTML = `
        <input type='number' class="inputCant me-3" id=inputCantProduct${productUbi} value="${productCantAfter}">
        <button class="btn btn-warning fw-bold" type="button" onclick="setCantProduct(${productUbi},${productCantAfter})">
            Ok.
        </button>
    `
}

function setCantProduct(ubicacionProduct, productCantLocal) {
    // console.log(ubicacionProduct)
    // console.log(productCantLocal)
    var value = document.querySelector(`#inputCantProduct${ubicacionProduct}`).value;
    if (value == productCantLocal) {
        table.innerHTML = ''
        valorTotalCartShop()
        enlistProduct(1, true)
    } else {
        // console.log('la cantidad es diferente')
        var priceUnitProduct = localStorage.getItem('Price_' + ubicacionProduct)
        var priceProductTotal = parseInt(value) * parseInt(priceUnitProduct)
        // console.log(priceProductTotal)
        localStorage.setItem('totalPriceUni_' + ubicacionProduct, priceProductTotal)
        localStorage.setItem('Cantproduct_' + ubicacionProduct, value)
        let table = document.querySelector("#tableProducts")
        table.innerHTML = ''
        valorTotalCartShop()
        enlistProduct(1, true)
    }
}

function deleteProduct(productUbi) {
    const swalWithBootstrapButtons = Swal.mixin({
        customClass: {
            confirmButton: 'btn btn-success',
            cancelButton: 'btn btn-danger'
        },
        buttonsStyling: false
    })

    swalWithBootstrapButtons.fire({
        title: 'Are you sure to delete this product?',
        text: "You will not be able to reverse this action!",
        imageUrl: './img/imagesLogosPage/ico.png',
        imageWidth: 200,
        imageHeight: 200,
        imageAlt: 'Custom image',
        showCancelButton: true,
        cancelButtonText: 'No, dont delete!',
        confirmButtonText: 'Yes, delete the product!',
    }).then((result) => {
        if (result.isConfirmed) {
            valorTotalCartShop()
            let table = document.querySelector("#tableProducts")
            table.innerHTML = ''

            localStorage.removeItem("Id_" + productUbi)
            localStorage.removeItem("Name_" + productUbi)
            localStorage.removeItem("Price_" + productUbi)
            localStorage.removeItem("totalPriceUni_" + productUbi)
            localStorage.removeItem("Cantproduct_" + productUbi)

            enlistProduct(1, true)

            contCart = parseInt(contCart) - parseInt(1)
            localStorage.setItem('counterCart', contCart)
            counterCart.innerHTML = `
            <span>${localStorage.getItem('counterCart')}</span>
            `
            swalWithBootstrapButtons.fire(
                'Deleted!',
                'Your product has been removed from the shopping cart',
                'success'
            )
        } else if (
            /* Read more about handling dismissals below */
            result.dismiss === Swal.DismissReason.cancel
        ) {
            swalWithBootstrapButtons.fire(
                'Cancelled',
                'Your product is safe :)',
            )
        }
    })
}

function valorTotalCartShop() {
    // debugger
    let numberOfProduct = parseInt(localStorage.getItem('counter'))
    var valorTotal = parseInt(0);
    console.log(numberOfProduct)
    for (let it = 1; it < numberOfProduct; it++) {
        var valor = localStorage.getItem("totalPriceUni_" + it)
        if (valor == null) {
            valor = parseInt(0);
        }
        console.log(valor)
        valorTotal = parseInt(valorTotal) + parseInt(valor)
        console.log(valorTotal)
    }
    console.log(valorTotal)
    localStorage.setItem('sumaTotalPreciosCart', valorTotal)
}

function endShop() {
    var totalProducts = localStorage.getItem('counterCart')
    var priceTotal = localStorage.getItem('sumaTotalPreciosCart')
    
    Swal.fire({
        title: 'Your shopping list is complete, Great!!',
        text: `You have #${totalProducts} selected products.`,
        icon: 'question',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, i take everything!',
        cancelButtonText: 'No, cancel!',
    }).then((result) => {
        if (result.isConfirmed) {
            Swal.fire({
                icon: 'success',
                title: `The total to pay are $${priceTotal}`,
                text: 'Fantastic, your products are on the way',
                text: 'Thanks for yout visit!!'
            })
            localStorage.clear();
            setTimeout(recargarPag, 3000);
        }
    })
}

function recargarPag(){
    location.reload();
}